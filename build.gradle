/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/8.1.1/samples
 */

plugins {
    id 'base'
}

def homePath = System.properties['user.home']
def presentationSrc = "presentation.adoc"
def presentationOut = "index.html"
def presentationSrcDir = "$projectDir"
def presentationSrcPath = "$projectDir/$presentationSrc"
def presentationBuildDir = "$projectDir/build"
def imagesDir = "$projectDir/images"
def imagesBuildDir = "$presentationBuildDir/images"
def revealjsDir = "$projectDir/reveal.js"
def revealjsBuildDir = "$presentationBuildDir/reveal.js"

tasks.register('copyImagesToBuildDir', Copy) {
    from "$imagesDir"
    into "$imagesBuildDir"
}


tasks.register('copyRevealjsToBuildDir', Copy) {
    from "$revealjsDir"
    into "$revealjsBuildDir"
}

tasks.register('buildPresentation', Exec) {
    dependsOn(copyImagesToBuildDir)
    dependsOn(copyRevealjsToBuildDir)
    commandLine "bash", "-c", "asciidoctor-revealjs $presentationSrcPath -D $presentationBuildDir -o $presentationOut"
}

tasks.named("assemble") {
    dependsOn(buildPresentation)
}
